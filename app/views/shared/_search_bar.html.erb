<%
  # Parameters:
  # search_path: The path where the search form submits to
  # placeholder: Optional placeholder text 
  # query: Current search query value
  search_path ||= "#"
  placeholder ||= "Search..."
  query ||= params[:query]
  centered ||= false
  max_width = centered ? "max-w-lg" : "w-full"
%>

<div class="mb-6 <%= 'flex justify-center' if centered %>">
  <%= form_with url: search_path, method: :get, local: true, class: "relative w-full #{max_width}" do |f| %>
    <div class="relative">
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <%= heroicon "magnifying-glass", variant: :outline, options: { class: "w-5 h-5 text-gray-400" } %>
      </div>
      <%= f.text_field :query, 
          value: query,
          placeholder: placeholder,
          class: "w-full pl-10 pr-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white",
          autocomplete: "off" %>
      <% if query.present? %>
        <%= link_to search_path, class: "absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600" do %>
          <%= heroicon "x-mark", variant: :outline, options: { class: "w-5 h-5" } %>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>

